@using SatisfactoryProductionator.DataModels.Enums;
@using SatisfactoryProductionator.DataModels.Models.Codex;

<div data-augmented-ui-reset></div>

<div data-augmented-ui="tl-clip tr-2-clip-x br-clip bl-clip border" class="codex-group">
    <div id="@itemGroup.Key.ToString()" class="codex-item-group">
        <div class="codex-group-heading">@FormatCategoryName(itemGroup.Key.ToString()) - @itemGroup.Count()</div>
        
            <ul class="group-list">
                @foreach (var item in itemGroup)
                {
                    <CodexGroupItem className=@item.ClassName
                                    displayname=@item.DisplayName
                                    iconPath=@item.IconPath />
                }
            </ul>
        
    </div>
</div>

@code {
    [Parameter]
    public IGrouping<CodexItemType, CodexItem> itemGroup { get; set; }

    private static string FormatCategoryName(string name)
    {
        for (int i = name.Length - 1; i > 0; i--)
        {
            if (char.IsUpper(name[i]))
            {
                name = name.Insert(i, ".");
            }
        }
        return name;
    }

}