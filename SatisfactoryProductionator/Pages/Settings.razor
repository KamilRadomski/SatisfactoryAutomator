@page "/settings"

@using SatisfactoryProductionator.DataModels.Enums;
@using SatisfactoryProductionator.DataModels.Models.Codex;
@using SatisfactoryProductionator.DataModels;
@using SatisfactoryProductionator.Services;
@using SatisfactoryProductionator.Shared;
@using SatisfactoryProductionator.Shared.CodexModal;

@inject CodexState CodexState
@inject CodexMenuState CodexMenuState

@implements IDisposable


@code {

    private static AppSettings _settings = new AppSettings();

    protected override async Task OnInitializedAsync()
    {
        base.OnInitialized();
        CodexState.OnStateChange += StateHasChanged;
        CodexMenuState.OnStateChange += StateHasChanged;

        if (CodexState.Codex == null)
        {
            await CodexState.InitializeCodexAsync();
        }
    }

    public void Dispose()
    {
        CodexState.OnStateChange -= StateHasChanged;
        CodexMenuState.OnStateChange -= StateHasChanged;
    }

}